"'Request Detail Screen' As screen":
    Fill: =RGBA(224,224,224,1)
    OnHidden: |-
        =Refresh('ASDocument.DocumentRequest');Refresh('ASDocument.ProcessApproval');
        //L·∫•y danh s√°ch ph√™ duy·ªát
        ClearCollect(gblColApprovalByRequest,AddColumns(Filter('ASDocument.DocumentRequest',status = 1 And active = 1) As Temp,"approvalUserID",LookUp('ASDocument.ProcessApproval',sort = Temp.lastSignNum And approveProcess = Temp.currentApproveLevel And documentID = Temp.documentID).userID))
    OnVisible: |-
        =UpdateContext({locFuntionRequestDetail:1});
        ClearCollect(colHistorySign,Table({ID:1,Time:"15/10/2023 06:00 AM",Content:"MSD ƒë√£ t·ª´ ch·ªëi",Reason:"",status:1},{ID:2,Time:"17/10/2023 08:00 PM",Content:"Ng∆∞·ªùi xem x√©t ƒë√£ t·ª´ ch·ªëi",Reason:"L√≠ do: ƒë√°nh gi√° l·∫°i vƒÉn b·∫£n",status:0},{ID:3,Time:"17/10/2023 08:00 PM",Content:"Ng∆∞·ªùi ph√™ duy·ªát ƒë√£ ph√™ duy·ªát",Reason:"L√≠ do: ƒë√°nh gi√° l·∫°i vƒÉn b·∫£n"}))

    btn_rds_BackGroundScreen As button:
        BorderStyle: =BorderStyle.None
        DisabledFill: =RGBA(241, 244, 250, 1)
        DisplayMode: =DisplayMode.Disabled
        Height: =768
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Text: =""
        Width: =1366
        ZIndex: =1

    ctn_rds_Title As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.None
        Height: =41
        LayoutMode: =LayoutMode.Auto
        PaddingLeft: =30
        PaddingRight: =30
        Width: =1170
        X: =196
        Y: =104
        ZIndex: =20

        lbl_rds_Title As label:
            AlignInContainer: =AlignInContainer.Stretch
            Color: =RGBA(43, 54, 74, 1)
            FontWeight: =FontWeight.Bold
            Height: =41
            Size: =18
            Text: ="Chi ti·∫øt y√™u c·∫ßu tr√¨nh duy·ªát"
            Width: =500
            X: =191
            Y: =101
            ZIndex: =1

    btn_rds_BackGround As button:
        BorderStyle: =BorderStyle.None
        BorderThickness: =0.1
        DisabledFill: =RGBA(246, 245, 250, 1)
        DisplayMode: =DisplayMode.Disabled
        Height: =If(locFuntionRequestDetail = 2,617,551)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        Text: =""
        Width: =1136
        X: =196
        Y: =If(locFuntionRequestDetail = 2,150,217)
        ZIndex: =22

    ctn_rds_MainContent As groupContainer.horizontalAutoLayoutContainer:
        DropShadow: =DropShadow.None
        Height: =If(locFuntionRequestDetail = 2,617,547)
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        PaddingBottom: =10
        PaddingLeft: =35
        PaddingRight: =35
        PaddingTop: =10
        Width: =1170
        X: =196
        Y: =If(locFuntionRequestDetail = 2,150,217)
        ZIndex: =23

        ctn_rds_TabPane As groupContainer.horizontalAutoLayoutContainer:
            DropShadow: =DropShadow.None
            FillPortions: =0.078
            LayoutGap: =3
            LayoutMinHeight: =20
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =1
            PaddingTop: =2
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            ZIndex: =1

            Button6 As button:
                BorderThickness: =1
                Color: =If(locFuntionRequestDetail = 1,RGBA(255,255,255,1),RGBA(0,0,0,1))
                Fill: =If(locFuntionRequestDetail = 1,RGBA(73, 113, 215, 1),RGBA(255,255,255,1))
                Height: =35
                HoverFill: =ColorFade(Self.Fill, -20%)
                OnSelect: |-
                    =UpdateContext({locFuntionRequestDetail:1})
                PressedColor: =Self.Color
                PressedFill: =Self.Fill
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                Text: ="Chi ti·∫øt"
                ZIndex: =1

            Button6_2 As button:
                BorderThickness: =1
                Color: =If(locFuntionRequestDetail = 2,RGBA(255,255,255,1),RGBA(0,0,0,1))
                Fill: =If(locFuntionRequestDetail = 2,RGBA(73, 113, 215, 1),RGBA(255,255,255,1))
                Height: =35
                HoverFill: =ColorFade(Self.Fill, -20%)
                OnSelect: |-
                    =UpdateContext({locFuntionRequestDetail:2});
                    ClearCollect(colDetailHistory,AddColumns(Filter('ASDocument.DocumentRequest',documentID = locInfoRequest.documentID And status <> 1),"OpenStatus",0))
                PressedColor: =Self.Color
                PressedFill: =Self.Fill
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                Text: ="L·ªãch s·ª≠"
                ZIndex: =2

        ctn_rds_Detail As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =10
            RadiusBottomRight: =10
            RadiusTopLeft: =0
            RadiusTopRight: =10
            Visible: =If(locFuntionRequestDetail = 1,true,false)
            ZIndex: =2

            ctn_rds_FormDetail2_1 As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =1.5
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutGap: =10
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowY: =LayoutOverflow.Scroll
                PaddingLeft: =10
                PaddingRight: =10
                PaddingTop: =10
                ZIndex: =1

                ctn_rds_DocumentDetail_1 As groupContainer.verticalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutGap: =5
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    PaddingLeft: =12
                    PaddingRight: =12
                    ZIndex: =7

                    ctn_rds_CompanyName_1 As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.None
                        Height: =90
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMinHeight: =85
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        ZIndex: =1

                        lbl_rds_CompanyName_1 As label:
                            Color: =RGBA(94, 94, 94, 1)
                            FontWeight: =FontWeight.Semibold
                            Size: =15
                            Text: ="C√¥ng ty"
                            ZIndex: =1

                        ctn_rds_CompanyNameInput_1 As groupContainer.horizontalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            DropShadow: =DropShadow.None
                            LayoutGap: =15
                            LayoutMinHeight: =50
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            PaddingLeft: =1
                            PaddingRight: =1
                            PaddingTop: =1
                            ZIndex: =3

                            drp_rds_CompanyNameInput_1 As dropdown:
                                BorderColor: =RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                ChevronBackground: =RGBA(73, 113, 215, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =DisplayMode.Disabled
                                FillPortions: =1
                                Items: =[LookUp(gblColCompany,ID = locInfoRequest.companyID).name]
                                LayoutMinWidth: =50
                                ZIndex: =1

                            drp_rds_CompanyNameInput_2 As dropdown:
                                BorderColor: =RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                ChevronBackground: =RGBA(73, 113, 215, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =DisplayMode.Disabled
                                FillPortions: =1
                                Items: =[LookUp(gblColDivision,ID = locInfoRequest.divisionID).name]
                                LayoutMinWidth: =50
                                ZIndex: =2

                    ctn_rds_DocumentType_1 As groupContainer.verticalAutoLayoutContainer:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DropShadow: =DropShadow.None
                        Height: =90
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutMinHeight: =85
                        LayoutMinWidth: =250
                        LayoutMode: =LayoutMode.Auto
                        ZIndex: =2

                        lbl_rds_DocumentType_1 As label:
                            Color: =RGBA(94, 94, 94, 1)
                            FontWeight: =FontWeight.Semibold
                            Size: =15
                            Text: ="Lo·∫°i t√†i li·ªáu"
                            ZIndex: =1

                        ctn_rds_DocumentTypeInput_1 As groupContainer.horizontalAutoLayoutContainer:
                            AlignInContainer: =AlignInContainer.SetByContainer
                            DropShadow: =DropShadow.None
                            LayoutGap: =15
                            LayoutMinHeight: =50
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            PaddingLeft: =1
                            PaddingRight: =1
                            PaddingTop: =1
                            ZIndex: =2

                            drp_rds_DocumentLevel_1 As dropdown:
                                BorderColor: =RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                ChevronBackground: =RGBA(73, 113, 215, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =DisplayMode.Disabled
                                FillPortions: =1
                                Items: =[LookUp(gblColDocumentLevel,levelID = locInfoRequest.levelID).name]
                                LayoutMinWidth: =150
                                ZIndex: =1

                            drp_rds_DocumentType_1 As dropdown:
                                BorderColor: =RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                ChevronBackground: =RGBA(73, 113, 215, 1)
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =DisplayMode.Disabled
                                FillPortions: =1
                                Items: =[LookUp(gblColDocumentType,ID = locInfoRequest.documentTypeID).name]
                                LayoutMinWidth: =150
                                ZIndex: =2

                    lbl_rds_FileCode As label:
                        Color: =RGBA(94, 94, 94, 1)
                        FontWeight: =FontWeight.Semibold
                        Size: =15
                        Text: ="M√£ h·ªì s∆°"
                        Visible: =If(locInfoRequest.levelID = 4,true,false)
                        ZIndex: =3

                    txt_rds_FileCodeInput As text:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        BorderThickness: =1
                        Default: =locInfoRequest.documentID
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =DisplayMode.Disabled
                        HintText: ="Nh·∫≠p s·ªë trang"
                        Mode: =TextMode.MultiLine
                        PaddingTop: =10
                        Visible: =If(locInfoRequest.levelID = 4,true,false)
                        ZIndex: =4

                    lbl_rds_DocumentName_1 As label:
                        Color: =RGBA(94, 94, 94, 1)
                        FontWeight: =FontWeight.Semibold
                        Size: =15
                        Text: ="T√™n vƒÉn b·∫£n"
                        ZIndex: =5

                    txt_rds_DocumentName_1 As text:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        BorderThickness: =1
                        Default: =locInfoRequest.documentName
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        Height: =100
                        HintText: ="Nh·∫≠p t√™n vƒÉn b·∫£n"
                        Mode: =TextMode.MultiLine
                        PaddingTop: =10
                        ZIndex: =6

                    frm_rds_Document_1 As form:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DataSource: ='ASDocument.DocumentRequest'
                        DefaultMode: =FormMode.New
                        Height: =165
                        LayoutMinHeight: =165
                        LayoutMinWidth: =400
                        ZIndex: =7

                        Attachments_DataCard2_1 As typedDataCard.attachmentsEditCard:
                            BorderStyle: =BorderStyle.Solid
                            DataField: ="{Attachments}"
                            Default: =ThisItem.Attachments
                            DisplayMode: =Parent.DisplayMode
                            DisplayName: ="File vƒÉn b·∫£n"
                            Fill: =RGBA(0, 0, 0, 0)
                            Height: =160
                            Required: =false
                            Update: =DataCardValue5_1.Attachments
                            Width: =603
                            X: =0
                            Y: =0
                            ZIndex: =4

                            DataCardKey6_1 As label:
                                AutoHeight: =true
                                Color: =RGBA(94, 94, 94, 1)
                                FontWeight: =FontWeight.Semibold
                                Height: =34
                                Size: =15
                                Text: =Parent.DisplayName
                                Width: =Parent.Width - 60
                                Wrap: =false
                                X: =2
                                Y: =10
                                ZIndex: =1

                            DataCardValue5_1 As attachments:
                                AddAttachmentText: ="ƒê√≠nh k√®m"
                                BorderColor: |-
                                    =//If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                    RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =If(locInfoRequest.status = 3,DisplayMode.Edit,DisplayMode.View)
                                Height: =103
                                IsInDataCard: =true
                                Items: =If(locInfoRequest.status = 3,Parent.Default,locInfoRequest.Attachments)
                                NoAttachmentsText: ="Kh√¥ng c√≥ t·ªáp n√†o."
                                OnAddFile: |-
                                    =If(
                                        Not(
                                            Or(
                                                EndsWith(
                                                    Lower(Last(Self.Attachments).Name),
                                                    ".pdf"
                                                )
                                            )
                                        ),
                                        Notify(
                                            "Only PDF files are allowed",
                                            NotificationType.Error
                                        );
                                        Reset(Self)
                                    )
                                PaddingBottom: =5
                                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                PaddingRight: =5
                                PaddingTop: =5
                                Tooltip: =Parent.DisplayName
                                Width: =600
                                X: =2
                                Y: =DataCardKey6_1.Y + DataCardKey6_1.Height + 5
                                ZIndex: =2

                            ErrorMessage6_1 As label:
                                AutoHeight: =true
                                Height: =10
                                Live: =Live.Assertive
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =Parent.Error
                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                Width: =Parent.Width - 60
                                X: =30
                                Y: =DataCardValue5_1.Y + DataCardValue5_1.Height
                                ZIndex: =3

                            StarVisible6_1 As label:
                                Align: =Align.Center
                                Height: =DataCardKey6_1.Height
                                Text: ="*"
                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                Width: =30
                                Wrap: =false
                                Y: =DataCardKey6_1.Y
                                ZIndex: =4

                    lbl_rds_SignPage As label:
                        Color: =RGBA(94, 94, 94, 1)
                        FontWeight: =FontWeight.Semibold
                        Size: =15
                        Text: ="S·ªë trang k√Ω"
                        ZIndex: =8

                    txt_rds_SignPage As text:
                        BorderColor: =RGBA(0, 0, 0, 1)
                        BorderThickness: =1
                        Default: =If(locInfoRequest.status <> 3,locInfoRequest.pageSignNumber)
                        DisabledColor: =RGBA(0, 0, 0, 1)
                        DisabledFill: =RGBA(255, 255, 255, 1)
                        DisplayMode: =If(locInfoRequest.status = 3,DisplayMode.Edit,DisplayMode.Disabled)
                        Format: =TextFormat.Number
                        HintText: ="Nh·∫≠p s·ªë trang"
                        Mode: =TextMode.MultiLine
                        PaddingTop: =10
                        ZIndex: =9

                    frm_rds_Attachment_1 As form:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        DataSource: ='ASDocument.RelatedDocument'
                        DefaultMode: =FormMode.New
                        Height: =165
                        LayoutMinHeight: =165
                        LayoutMinWidth: =400
                        ZIndex: =10

                        Attachments_DataCard2_3 As typedDataCard.attachmentsEditCard:
                            BorderStyle: =BorderStyle.Solid
                            DataField: ="{Attachments}"
                            Default: =ThisItem.Attachments
                            DisplayMode: =Parent.DisplayMode
                            DisplayName: ="Ph·ª• l·ª•c ƒë√≠nh k√®m"
                            Fill: =RGBA(0, 0, 0, 0)
                            Height: =160
                            Required: =false
                            Update: =DataCardValue5_3.Attachments
                            Width: =603
                            X: =0
                            Y: =0
                            ZIndex: =4

                            DataCardKey6_3 As label:
                                AutoHeight: =true
                                Color: =RGBA(94, 94, 94, 1)
                                FontWeight: =FontWeight.Semibold
                                Height: =34
                                Size: =15
                                Text: =Parent.DisplayName
                                Width: =Parent.Width - 60
                                Wrap: =false
                                X: =2
                                Y: =10
                                ZIndex: =1

                            DataCardValue5_3 As attachments:
                                AddAttachmentText: ="ƒê√≠nh k√®m"
                                BorderColor: |-
                                    =//If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                                    RGBA(0, 0, 0, 1)
                                BorderThickness: =1
                                DisabledColor: =RGBA(0, 0, 0, 1)
                                DisabledFill: =RGBA(255, 255, 255, 1)
                                DisplayMode: =If(locInfoRequest.status = 3,DisplayMode.Edit,DisplayMode.View)
                                Height: =103
                                IsInDataCard: =true
                                Items: =If(locInfoRequest.status = 3,Parent.Default,LookUp('ASDocument.RelatedDocument',documentID = locInfoRequest.documentID).Attachments)
                                NoAttachmentsText: ="Kh√¥ng c√≥ t·ªáp n√†o."
                                PaddingBottom: =5
                                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                                PaddingRight: =5
                                PaddingTop: =5
                                Tooltip: =Parent.DisplayName
                                Width: =600
                                X: =2
                                Y: =DataCardKey6_3.Y + DataCardKey6_3.Height + 5
                                ZIndex: =2

                            ErrorMessage6_3 As label:
                                AutoHeight: =true
                                Height: =10
                                Live: =Live.Assertive
                                PaddingBottom: =0
                                PaddingLeft: =0
                                PaddingRight: =0
                                PaddingTop: =0
                                Text: =Parent.Error
                                Visible: =Parent.DisplayMode=DisplayMode.Edit
                                Width: =Parent.Width - 60
                                X: =30
                                Y: =DataCardValue5_3.Y + DataCardValue5_3.Height
                                ZIndex: =3

                            StarVisible6_3 As label:
                                Align: =Align.Center
                                Height: =DataCardKey6_3.Height
                                Text: ="*"
                                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                                Width: =30
                                Wrap: =false
                                Y: =DataCardKey6_3.Y
                                ZIndex: =4

            ctn_rds_FormDetail2 As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =100
                LayoutMinWidth: =150
                LayoutMode: =LayoutMode.Auto
                PaddingBottom: =10
                PaddingLeft: =10
                PaddingRight: =10
                PaddingTop: =10
                ZIndex: =2

                lbl_rds_ApproveProcess As label:
                    Color: =RGBA(94, 94, 94, 1)
                    FontWeight: =FontWeight.Semibold
                    PaddingLeft: =40
                    Size: =15
                    Text: ="Ti·∫øn tr√¨nh ph√™ duy·ªát"
                    ZIndex: =1

                gal_rds_ApproveProcess As gallery.galleryVertical:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DelayItemLoading: =true
                    Items: =Sort(Filter('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID And requestTimeNum = locInfoRequest.requestTimeNum + 1),Created,SortOrder.Descending)
                    Layout: =Layout.Vertical
                    LayoutMinHeight: =287
                    LayoutMinWidth: =320
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =120
                    ZIndex: =2

                    shp_rds_Circle As circle:
                        Fill: =RGBA(220, 228, 252, 1)
                        Height: =47
                        OnSelect: =Select(Parent)
                        Width: =48
                        X: =36
                        Y: =14
                        ZIndex: =1

                    shp_rds_Bar As rectangle:
                        Fill: =RGBA(220, 228, 252, 1)
                        Height: =90
                        OnSelect: =Select(Parent)
                        Visible: =If(ThisItem.ID > First(Filter('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID)).ID,true,false)
                        Width: =2
                        X: =59
                        Y: =49
                        ZIndex: =2

                    ico_rds_StatusApprove As icon.Cancel:
                        Color: =RGBA(73, 113, 215, 1)
                        Height: =47
                        Icon: =If(ThisItem.status = 1,Icon.Check,ThisItem.status = 2,Icon.Cancel,ThisItem.status = 3,Icon.Draw)
                        OnSelect: =Select(Parent)
                        Width: =21
                        X: =50
                        Y: =14
                        ZIndex: =3

                    lbl_rds_ApproveBy As label:
                        Color: =RGBA(94, 94, 94, 1)
                        OnSelect: =Select(Parent)
                        Text: =If(IsBlank(LookUp(gblColAllUser,userID = ThisItem.userID).fullName),"H·ªá th·ªëng",LookUp(gblColAllUser,userID = ThisItem.userID).fullName) & If(ThisItem.status = 1," ƒë√£ duy·ªát",ThisItem.status = 2," ƒë√£ t·ª´ ch·ªëi",ThisItem.status = 3," ƒë√£ ƒëi·ªÅu ch·ªânh")
                        Width: =270
                        X: =98
                        Y: =49
                        ZIndex: =4

                    lbl_rds_TimeApprove As label:
                        Color: =RGBA(94, 94, 94, 1)
                        FontWeight: =FontWeight.Bold
                        OnSelect: =Select(Parent)
                        Text: =ThisItem.Created
                        Width: =270
                        X: =98
                        Y: =17
                        ZIndex: =5

                    lbl_rds_ReasonReject As label:
                        Color: =RGBA(94, 94, 94, 1)
                        OnSelect: =Select(Parent)
                        Text: |-
                            ="L√≠ do: " & If(IsBlank(ThisItem.comment),"Kh√¥ng c√≥",ThisItem.comment)
                        Visible: =If(ThisItem.status = 1,false,true)
                        Width: =270
                        X: =98
                        Y: =80
                        ZIndex: =6

        ctn_rds_SignedHistory As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =10
            RadiusBottomRight: =10
            RadiusTopLeft: =0
            RadiusTopRight: =10
            Visible: =If(locFuntionRequestDetail = 2,true,false)
            ZIndex: =4

            ctn_rds_FormDetail2_4 As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                LayoutAlignItems: =LayoutAlignItems.Stretch
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =100
                LayoutMinWidth: =150
                LayoutMode: =LayoutMode.Auto
                PaddingBottom: =10
                PaddingLeft: =10
                PaddingRight: =10
                PaddingTop: =10
                ZIndex: =1

                lbl_rds_ApproveProcess_1 As label:
                    Color: =RGBA(94, 94, 94, 1)
                    FontWeight: =FontWeight.Bold
                    PaddingLeft: =10
                    Size: =15
                    Text: ="Tr√¨nh duy·ªát vƒÉn b·∫£n"
                    Underline: =true
                    ZIndex: =1

                Gallery11 As gallery.variableTemplateHeightGallery:
                    DelayItemLoading: =true
                    Items: |-
                        =//colHistorySign
                        Filter(colDetailHistory,requestTimeNum > 0)
                    Layout: =Layout.Vertical
                    LayoutMinHeight: =287
                    LayoutMinWidth: =320
                    LoadingSpinner: =LoadingSpinner.Data
                    ShowScrollbar: =false
                    TemplateSize: =65
                    ZIndex: =3

                    Container3 As groupContainer.horizontalAutoLayoutContainer:
                        DropShadow: =DropShadow.Semilight
                        Height: =60
                        LayoutMode: =LayoutMode.Auto
                        PaddingRight: =20
                        RadiusBottomLeft: =10
                        RadiusBottomRight: =10
                        RadiusTopLeft: =10
                        RadiusTopRight: =10
                        Width: =1068
                        X: =1
                        ZIndex: =1

                        Label14 As label:
                            Align: =Align.Center
                            AlignInContainer: =AlignInContainer.Center
                            FontWeight: =FontWeight.Semibold
                            Text: ="L·∫ßn " & ThisItem.requestTimeNum
                            Width: =70
                            ZIndex: =1

                        Container7 As groupContainer.verticalAutoLayoutContainer:
                            DropShadow: =DropShadow.None
                            LayoutMinHeight: =0
                            LayoutMinWidth: =250
                            LayoutMode: =LayoutMode.Auto
                            PaddingLeft: =20
                            PaddingRight: =20
                            PaddingTop: =2
                            ZIndex: =2

                            Image7 As image:
                                AlignInContainer: =AlignInContainer.Center
                                Height: =40
                                Image: =Documents_1
                                OnSelect: |-
                                    =If(ThisItem.status = 0,Patch(colHistorySign,LookUp(colHistorySign,ID = ThisItem.ID),{status:1}),Patch(colHistorySign,LookUp(colHistorySign,ID = ThisItem.ID),{status:0}))
                                Width: =50
                                X: =40
                                Y: =40
                                ZIndex: =1

                            Label16 As label:
                                AlignInContainer: =AlignInContainer.Stretch
                                Color: =RGBA(106, 122, 127, 1)
                                FillPortions: =1
                                FontWeight: =FontWeight.Semibold
                                LayoutMinHeight: =30
                                OnSelect: |-
                                    =If(ThisItem.status = 0,Patch(colHistorySign,LookUp(colHistorySign,ID = ThisItem.ID),{status:1}),Patch(colHistorySign,LookUp(colHistorySign,ID = ThisItem.ID),{status:0}))
                                Size: =12
                                Text: =If(ThisItem.status = 3,"Y√™u c·∫ßu ƒë√£ b·ªã t·ª´ ch·ªëi",ThisItem.status = 2,"Y√™u c·∫ßu ƒë√£ ƒë∆∞·ª£c duy·ªát")
                                ZIndex: =2

                            Label12_4 As label:
                                AlignInContainer: =AlignInContainer.Center
                                Color: =RGBA(15, 108, 189, 1)
                                Height: =26
                                OnSelect: |-
                                    =Launch("https://bhktechcorp.sharepoint.com/sites/Dev-Powerapp/Lists/ASDocumentHistoryApprove/Attachments/"& LookUp('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID And requestTimeNum = ThisItem.requestTimeNum + 1).ID & "/" & Last(LookUp('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID And requestTimeNum = ThisItem.requestTimeNum + 1).Attachments).DisplayName)
                                PaddingLeft: =30
                                Size: =12
                                Text: ="üìù " & First(LookUp('ASDocument.DocumentRequest',documentID = locInfoRequest.documentID).Attachments).DisplayName
                                Visible: =If(ThisItem.status = 2,false,true)
                                Width: =270
                                X: =16
                                Y: =22
                                ZIndex: =3

                            Image9_1 As image:
                                AlignInContainer: =AlignInContainer.Center
                                Height: =30
                                Image: =Eye
                                LayoutMinHeight: =20
                                OnSelect: |-
                                    =UpdateContext({locReviewFile:true});
                                    UpdateContext({locFileReadPDF:LookUp('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID And requestTimeNum = ThisItem.requestTimeNum + 1).Attachments})
                                Visible: =If(locInfoRequest.status = 2,If(gblRecUser.roleID = 3,true,gblRecUser.roleID = 4,true,false),true)
                                X: =40
                                Y: =18
                                ZIndex: =4

                    Gallery5_2 As gallery.galleryVertical:
                        DelayItemLoading: =true
                        Height: =93
                        Items: |-
                            =//Sort(Table({ID:1,Time:"15/10/2023 06:00 AM",Content:"Ng∆∞·ªùi k√Ω: Tr·∫ßn VƒÉn H·∫≠u",Reason:""},{ID:2,Time:"17/10/2023 08:00 PM",Content:"Ng∆∞·ªùi k√Ω: V√µ ƒê·ªó Thi Nh√¢n",Reason:"L√≠ do: ƒë√°nh gi√° l·∫°i vƒÉn b·∫£n"}),ID,SortOrder.Descending)
                            Filter('ASDocument.HistoryApprove',documentID = locInfoRequest.documentID And requestTimeNum = ThisItem.requestTimeNum + 1)
                        Layout: =Layout.Vertical
                        LoadingSpinner: =LoadingSpinner.Data
                        ShowScrollbar: =false
                        TemplateSize: =39
                        Visible: =If(ThisItem.status = 0,false,true)
                        Width: =1069
                        Y: =61
                        ZIndex: =2

                        Container8_1 As groupContainer.verticalAutoLayoutContainer:
                            Height: =39
                            LayoutMode: =LayoutMode.Auto
                            PaddingBottom: =5
                            PaddingLeft: =5
                            PaddingRight: =5
                            PaddingTop: =5
                            Width: =914
                            X: =145
                            ZIndex: =4

                            lbl_rds_TimeApprove_4 As label:
                                AlignInContainer: =AlignInContainer.Center
                                Color: =RGBA(94, 94, 94, 1)
                                FontWeight: =FontWeight.Semibold
                                Height: =25
                                OnSelect: =
                                Size: =12
                                Text: ="üïó " & ThisItem.Created
                                Width: =270
                                X: =20
                                ZIndex: =1

                            lbl_rds_ReasonReject_4 As label:
                                AlignInContainer: =AlignInContainer.Center
                                Color: =RGBA(94, 94, 94, 1)
                                Height: =30
                                OnSelect: =
                                Size: =12
                                Text: =If(IsBlank(LookUp(gblColAllUser,userID = ThisItem.userID).fullName),"H·ªá th·ªëng",LookUp(gblColAllUser,userID = ThisItem.userID).fullName) & If(ThisItem.status = 1," ƒë√£ duy·ªát",ThisItem.status = 2," ƒë√£ t·ª´ ch·ªëi",ThisItem.status = 3," ƒë√£ ƒëi·ªÅu ch·ªânh")
                                Width: =270
                                X: =290
                                Y: =18
                                ZIndex: =2

            Rectangle1 As rectangle:
                AlignInContainer: =AlignInContainer.Center
                Fill: =RGBA(139, 154, 159, 1)
                Height: =455
                LayoutMinHeight: =0
                Width: =1
                ZIndex: =2

    ctn_rds_Header As groupContainer.horizontalAutoLayoutContainer:
        DropShadow: =DropShadow.None
        Height: =104
        LayoutMode: =LayoutMode.Auto
        Width: =1170
        X: =196
        ZIndex: =24

        ctn_rds_Tab As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            Height: =101
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutGap: =5
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            Width: =1229
            X: =137
            ZIndex: =1

            ctn_rs_Tab_1 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                Height: =101
                LayoutAlignItems: =LayoutAlignItems.Center
                LayoutGap: =5
                LayoutMinHeight: =100
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =35
                Width: =1229
                X: =137
                ZIndex: =1

                btn_rs_Create_2 As button:
                    BorderStyle: =BorderStyle.None
                    Color: =RGBA(94, 94, 94, 1)
                    DisabledFill: =
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =28
                    HoverFill: =ColorFade(RGBA(73, 113, 215, 1), -20%)
                    OnSelect: =Back()
                    PressedFill: =RGBA(73, 113, 215, 1)
                    RadiusBottomLeft: =5
                    RadiusBottomRight: =5
                    RadiusTopLeft: =5
                    RadiusTopRight: =5
                    Size: =13
                    Text: ="Tr·ªü v·ªÅ"
                    Width: =104
                    X: =117
                    Y: =36
                    ZIndex: =1

                btn_rs_Create_1 As button:
                    BorderStyle: =BorderStyle.None
                    DisabledFill: =
                    Fill: =RGBA(72, 163, 62, 1)
                    Height: =28
                    HoverFill: =ColorFade(Self.Fill, -20%)
                    OnSelect: |-
                        =//C·∫≠p nh·∫≠t l·ªãch s·ª≠ ph√™ duy·ªát
                        Patch(
                            'ASDocument.HistoryApprove',
                            Defaults('ASDocument.HistoryApprove'),
                            {
                                documentID: locInfoRequest.documentID,
                                userID: gblRecUser.userID,
                                status: 1,
                                approveTime: Value(Day(Today()) & Month(Today()) & Year(Today())),
                                comment: Blank(),
                                approveProcess: locInfoRequest.currentApproveLevel,
                                requestTimeNum: locInfoRequest.requestTimeNum + 1
                            }
                        );
                        //K√Ω duy·ªát vƒÉn b·∫£n
                        If(
                            locInfoRequest.approvalUserID = Last(
                                Filter(
                                    'ASDocument.ProcessApproval',
                                    documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.maxApproveLevel
                                )
                            ).userID,
                            'ASDocument.DocumentSign'.Run(
                                2,
                                Now() & Char(10) & gblRecUser.fullName & Char(10) & gblRecUser.jobTitle,
                                locInfoRequest.documentID,
                                locInfoRequest.ID,
                                /*If(
                                    locInfoRequest.lastSignNum = Last(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                        )
                                    ).sort,
                                    First(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel + 1
                                        )
                                    ).sort,
                                    locInfoRequest.lastSignNum
                                )*/
                                locInfoRequest.lastSignNum,
                                locInfoRequest.pageSignNumber,
                                If(
                                    locInfoRequest.lastSignNum = Last(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                        )
                                    ).sort,
                                    First(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel + 1
                                        )
                                    ).userID,
                                    LookUp(
                                        'ASDocument.ProcessApproval',
                                        documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel And sort = locInfoRequest.lastSignNum
                                    ).userID
                                ),
                                {
                                    file: {
                                        contentBytes: First(locInfoRequest.Attachments).Value,
                                        name: "File van ban-" & Now() & ".pdf"
                                    },
                                    file_1: {
                                        contentBytes: First(
                                            LookUp(
                                                'ASDocument.Users_Roles',
                                                userID = gblRecUser.userID And active = 1
                                            ).Attachments
                                        ).Value,
                                        name: "Signature-" & Now() & ".png"
                                    }
                                }
                            ),
                            'ASDocument.DocumentSign'.Run(
                                1,
                                Now() & Char(10) & gblRecUser.fullName & Char(10) & gblRecUser.jobTitle,
                                locInfoRequest.documentID,
                                locInfoRequest.ID,
                                /*If(
                                    locInfoRequest.lastSignNum = Last(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                        )
                                    ).sort,
                                    First(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel + 1
                                        )
                                    ).sort,
                                    locInfoRequest.lastSignNum
                                )*/
                                locInfoRequest.lastSignNum,
                                locInfoRequest.pageSignNumber,
                                If(
                                    locInfoRequest.lastSignNum = Last(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                        )
                                    ).sort,
                                    First(
                                        Filter(
                                            'ASDocument.ProcessApproval',
                                            documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel + 1
                                        )
                                    ).userID,
                                    LookUp(
                                        'ASDocument.ProcessApproval',
                                        documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel And sort = locInfoRequest.lastSignNum
                                    ).userID
                                ),
                                {
                                    file: {
                                        contentBytes: First(locInfoRequest.Attachments).Value,
                                        name: "File van ban-" & Now() & ".pdf"
                                    },
                                    file_1: {
                                        contentBytes: First(
                                            LookUp(
                                                'ASDocument.Users_Roles',
                                                userID = gblRecUser.userID And active = 1
                                            ).Attachments
                                        ).Value,
                                        name: "Signature-" & Now() & ".png"
                                    }
                                }
                            )
                        );
                        //C·∫≠p nh·∫≠t tr·∫°ng th√°i y√™u c·∫ßu th√†nh ƒë√£ duy·ªát
                        If(
                            locInfoRequest.approvalUserID = Last(
                                Filter(
                                    'ASDocument.ProcessApproval',
                                    documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.maxApproveLevel
                                )
                            ).userID,
                            Patch(
                                'ASDocument.DocumentRequest',
                                LookUp(
                                    'ASDocument.DocumentRequest',
                                    ID = locInfoRequest.ID
                                ),
                                {status: 2}
                            ),
                            Patch(
                                'ASDocument.DocumentRequest',
                                LookUp(
                                    'ASDocument.DocumentRequest',
                                    ID = locInfoRequest.ID
                                ),
                                {
                                    lastSignNum: If(
                                        locInfoRequest.lastSignNum = Last(
                                            Filter(
                                                'ASDocument.ProcessApproval',
                                                documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                            )
                                        ).sort,
                                        First(
                                            Filter(
                                                'ASDocument.ProcessApproval',
                                                documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel + 1
                                            )
                                        ).sort,
                                        locInfoRequest.lastSignNum + 1
                                    )
                                }
                            )
                        );
                        //C·∫≠p nh·∫≠t b∆∞·ªõc duy·ªát hi·ªán t·∫°i
                        If(
                            locInfoRequest.approvalUserID = Last(
                                Filter(
                                    'ASDocument.ProcessApproval',
                                    documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.maxApproveLevel
                                )
                            ).userID,
                            If(
                                locInfoRequest.lastSignNum = Last(
                                    Filter(
                                        'ASDocument.ProcessApproval',
                                        documentID = locInfoRequest.documentID And approveProcess = locInfoRequest.currentApproveLevel
                                    )
                                ).sort,
                                Patch(
                                    'ASDocument.DocumentRequest',
                                    LookUp(
                                        'ASDocument.DocumentRequest',
                                        ID = locInfoRequest.ID
                                    ),
                                    {currentApproveLevel: locInfoRequest.currentApproveLevel + 1}
                                )
                            )
                        );
                        //C·∫≠p nh·∫≠t danh s√°ch duy·ªát
                        ClearCollect(
                            gblcolRequestOnProcess,
                            Filter(
                                'ASDocument.DocumentRequest' As Temp,
                                Temp.lastSignNum exactin (Filter(
                                    'ASDocument.ProcessApproval',
                                    documentID = Temp.documentID
                                )).sort And Temp.status = 1 And Temp.active = 1
                            )
                        );
                        ClearCollect(
                            gblColApprovalByRequest,
                            AddColumns(
                                gblcolRequestOnProcess As Temp,
                                "approvalUserID",
                                LookUp(
                                    'ASDocument.ProcessApproval',
                                    sort = Temp.lastSignNum And documentID = Temp.documentID
                                ).userID
                            )
                        );
                        //L·∫•y danh s√°ch ph√™ duy·ªát
                        Refresh('ASDocument.DocumentRequest');
                        Refresh('ASDocument.ProcessApproval');
                        //L·∫•y danh s√°ch ph√™ duy·ªát
                        ClearCollect(
                            gblColApprovalByRequest,
                            AddColumns(
                                Filter(
                                    'ASDocument.DocumentRequest',
                                    status = 1 And active = 1
                                ) As Temp,
                                "approvalUserID",
                                LookUp(
                                    'ASDocument.ProcessApproval',
                                    sort = Temp.lastSignNum And approveProcess = Temp.currentApproveLevel And documentID = Temp.documentID
                                ).userID
                            )
                        );
                        Notify(
                            "Duy·ªát th√†nh c√¥ng",
                            NotificationType.Success,
                            1500
                        );
                        UpdateContext({locApprove: false})
                    PressedColor: =RGBA(255,255,255,1)
                    PressedFill: =Self.Fill
                    RadiusBottomLeft: =5
                    RadiusBottomRight: =5
                    RadiusTopLeft: =5
                    RadiusTopRight: =5
                    Size: =13
                    Text: ="Ph√™ duy·ªát"
                    Visible: =If(locInfoRequest.status = 1,If(gblRecUser.userID = LookUp('ASDocument.ProcessApproval',documentID = locInfoRequest.documentID And sort = locInfoRequest.lastSignNum And approveProcess = locInfoRequest.currentApproveLevel).userID,true,false),false)
                    Width: =104
                    X: =117
                    Y: =36
                    ZIndex: =2

                btn_rs_Overview_1 As button:
                    BorderStyle: =BorderStyle.None
                    Fill: =RGBA(233, 79, 76, 1)
                    Height: =28
                    HoverFill: =ColorFade(Self.Fill, -20%)
                    OnSelect: |-
                        =UpdateContext({locReject:true})
                    PressedColor: =Color.White
                    PressedFill: =Self.Fill
                    RadiusBottomLeft: =5
                    RadiusBottomRight: =5
                    RadiusTopLeft: =5
                    RadiusTopRight: =5
                    Size: =13
                    Text: ="T·ª´ ch·ªëi"
                    Visible: =If(locInfoRequest.status = 1,If(gblRecUser.userID = LookUp('ASDocument.ProcessApproval',documentID = locInfoRequest.documentID And sort = locInfoRequest.lastSignNum And approveProcess = locInfoRequest.currentApproveLevel).userID,true,false),false)
                    Width: =104
                    X: =191
                    Y: =36
                    ZIndex: =3

                btn_rs_Overview_2 As button:
                    BorderStyle: =BorderStyle.None
                    Fill: =RGBA(109, 49, 162, 1)
                    Height: =28
                    HoverFill: =ColorFade(Self.Fill, -20%)
                    OnSelect: |-
                        =//G·ª≠i mail th√¥ng b√°o cho c·∫•p duy·ªát ƒë·∫ßu
                        'ASDocument.SendMail'.Run(LookUp(gblColAllUser,userID = First(Filter('ASDocument.ProcessApproval',documentID = locInfoRequest.documentID)).userID).email,"Y√™u c·∫ßu k√Ω duy·ªát cho vƒÉn b·∫£n " & locInfoRequest.documentName & " ƒë√£ ƒë∆∞·ª£c tr√¨nh duy·ªát l·∫°i","M√£ t√†i li·ªáu/h·ªì s∆°: " & locInfoRequest.documentID & "<br>" & "C·∫•p t√†i li·ªáu: " & LookUp(gblColDocumentLevel,levelID = locInfoRequest.levelID).name & "<br>" & "Lo·∫°i vƒÉn b·∫£n: " & LookUp(gblColDocumentType,ID = locInfoRequest.levelID).name & "<br>" & "C√¥ng ty: " & LookUp(gblColCompany,ID = locInfoRequest.companyID).name & "<br>" & "ƒê∆°n v·ªã: " & LookUp(gblColDivision,ID = locInfoRequest.divisionID).name & "<br>" & "Ng∆∞·ªùi t·∫°o: " & gblRecUser.fullName & "<br>" & "Th·ªùi gian ƒëi·ªÅu ch·ªânh: " & Now(),{file:{contentBytes:First(locInfoRequest.Attachments).Value,name:"File van ban-" & Now()&".pdf"}});
                        
                        //C·∫≠p nh·∫≠t l·∫°i tr·∫°ng th√°i ho·∫°t ƒë·ªông c·ªßa y√™u c·∫ßu c≈© v√† t·∫°o d√≤ng y√™u c·∫ßu m·ªõi
                        Patch('ASDocument.DocumentRequest',LookUp('ASDocument.DocumentRequest',ID = locInfoRequest.ID),{active:0});
                        
                        Patch(
                            'ASDocument.DocumentRequest',
                            Defaults('ASDocument.DocumentRequest'),
                            {
                                documentGroupID: locInfoRequest.documentGroupID,
                                levelID: locInfoRequest.levelID,
                                documentTypeID: locInfoRequest.documentTypeID,
                                userID: locInfoRequest.userID,
                                documentID: locInfoRequest.documentID,
                                createdDateValue: locInfoRequest.createdDateValue,
                                currentApproveLevel:If(locInfoRequest.currentApproveLevel = 3,2,1),
                                description:locInfoRequest.description,
                                documentName:locInfoRequest.documentName,
                                maxApproveLevel:locInfoRequest.maxApproveLevel,
                                status:1,
                                pageSignNumber:Value(txt_rds_SignPage.Text),
                                requestTimeNum:locInfoRequest.requestTimeNum,
                                companyID:locInfoRequest.companyID,
                                divisionID:locInfoRequest.divisionID,
                                active:1,
                                lastSignNum:If(locInfoRequest.currentApproveLevel = 3,First(Filter('ASDocument.ProcessApproval',approveProcess = 2 And documentID = locInfoRequest.documentID)).sort,1)
                            },frm_rds_Document_1.Updates
                        );
                        
                        //L∆∞u t√†i li·ªáu li√™n quan
                        Patch('ASDocument.RelatedDocument',Defaults('ASDocument.RelatedDocument'),{documentID:locInfoRequest.documentID,active:1},frm_rds_Attachment_1.Updates);
                        
                        Notify("ƒêi·ªÅu ch·ªânh th√†nh c√¥ng",NotificationType.Success,1500);
                        Back();
                    PressedColor: =Color.White
                    PressedFill: =Self.Fill
                    RadiusBottomLeft: =5
                    RadiusBottomRight: =5
                    RadiusTopLeft: =5
                    RadiusTopRight: =5
                    Size: =13
                    Text: ="ƒêi·ªÅu ch·ªânh"
                    Visible: =If(locInfoRequest.status = 3,If(locInfoRequest.currentApproveLevel < 3,If(gblRecUser.userID = locInfoRequest.userID,true,false),If(gblRecUser.roleID = 3,true,false),false),false)
                    Width: =104
                    X: =191
                    Y: =36
                    ZIndex: =4

        ctn_rds_Info As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            Fill: =RGBA(220, 228, 252, 1)
            FillPortions: =0.3
            Height: =80
            LayoutMinHeight: =100
            LayoutMinWidth: =50
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =10
            PaddingRight: =10
            RadiusBottomLeft: =20
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =20
            ZIndex: =2

            img_rds_Avatar As image:
                AlignInContainer: =AlignInContainer.Center
                Height: =50
                Image: =User().Image
                LayoutMinHeight: =50
                RadiusBottomLeft: =img_rds_Avatar.Height
                RadiusBottomRight: =img_rds_Avatar.Height
                RadiusTopLeft: =img_rds_Avatar.Height
                RadiusTopRight: =img_rds_Avatar.Height
                Width: =50
                ZIndex: =1

            ctn_rds_Info2 As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =0
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                PaddingLeft: =5
                ZIndex: =2

                lbl_rds_Name As label:
                    FontWeight: =FontWeight.Bold
                    PaddingTop: =20
                    Size: =12
                    Text: =User().FullName
                    Wrap: =false
                    ZIndex: =1

                lbl_rds_Mail As label:
                    PaddingBottom: =20
                    Size: =12
                    Text: =User().Email
                    Wrap: =false
                    ZIndex: =2

    ctn_rds_InforRequest1 As groupContainer.horizontalAutoLayoutContainer:
        DropShadow: =DropShadow.None
        Height: =72
        LayoutMode: =LayoutMode.Auto
        PaddingLeft: =35
        PaddingRight: =35
        Visible: =If(locFuntionRequestDetail = 2,false,true)
        Width: =1170
        X: =196
        Y: =140
        ZIndex: =25

        ctn_rds_InforRequest2 As groupContainer.verticalAutoLayoutContainer:
            DropShadow: =DropShadow.None
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutGap: =30
            LayoutMinHeight: =50
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            ZIndex: =1

            ctn_rds_CreatedBy As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =50
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Width: =300
                ZIndex: =1

                ctn_rds_CreatedByTitle As groupContainer.horizontalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutMinHeight: =35
                    LayoutMinWidth: =0
                    LayoutMode: =LayoutMode.Auto
                    Width: =100
                    ZIndex: =1

                    img_rds_CreatedBy As image:
                        AlignInContainer: =AlignInContainer.Start
                        Height: =30
                        Image: =Person
                        LayoutMinHeight: =25
                        PaddingLeft: =60
                        ZIndex: =1

                    lbl_rds_CreatedBy As label:
                        AlignInContainer: =AlignInContainer.Stretch
                        Color: =RGBA(73, 113, 215, 1)
                        FillPortions: =1
                        LayoutMinHeight: =35
                        LayoutMinWidth: =50
                        PaddingLeft: =0
                        Text: ="Ng∆∞·ªùi so·∫°n th·∫£o"
                        ZIndex: =2

                btn_rds_CreatedBy As button:
                    AlignInContainer: =AlignInContainer.Stretch
                    BorderStyle: =BorderStyle.None
                    DisabledColor: =RGBA(0, 0, 0, 1)
                    DisabledFill: =RGBA(231, 231, 231, 1)
                    DisplayMode: =DisplayMode.Disabled
                    FillPortions: =1
                    Height: =20
                    LayoutMinHeight: =20
                    RadiusBottomLeft: =20
                    RadiusBottomRight: =20
                    RadiusTopLeft: =20
                    RadiusTopRight: =20
                    Size: =13
                    Text: =LookUp(gblColAllUser,userID = locInfoRequest.userID).fullName
                    Width: =140
                    ZIndex: =3

            ctn_rds_Created As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =50
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Width: =200
                ZIndex: =2

                ctn_rds_CreatedTitle As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutMinHeight: =35
                    LayoutMinWidth: =0
                    LayoutMode: =LayoutMode.Auto
                    ZIndex: =1

                    img_rds_Created As image:
                        AlignInContainer: =AlignInContainer.Center
                        Height: =30
                        Image: =Clock
                        LayoutMinHeight: =30
                        PaddingLeft: =20
                        Width: =50
                        ZIndex: =1

                    lbl_rds_Created As label:
                        Color: =RGBA(73, 113, 215, 1)
                        FillPortions: =1
                        LayoutMinHeight: =35
                        LayoutMinWidth: =50
                        Text: ="Th·ªùi gian t·∫°o"
                        ZIndex: =2

                btn_rds_Created As button:
                    AlignInContainer: =AlignInContainer.Center
                    BorderStyle: =BorderStyle.None
                    DisabledColor: =RGBA(0, 0, 0, 1)
                    DisabledFill: =RGBA(255, 255, 255, 1)
                    DisplayMode: =DisplayMode.Disabled
                    FillPortions: =1
                    Height: =20
                    LayoutMinHeight: =20
                    RadiusBottomLeft: =20
                    RadiusBottomRight: =20
                    RadiusTopLeft: =20
                    RadiusTopRight: =20
                    Size: =13
                    Text: =locInfoRequest.Created
                    Width: =190
                    ZIndex: =3

            ctn_rds_Status As groupContainer.verticalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                DropShadow: =DropShadow.None
                FillPortions: =0
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =50
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                Width: =150
                ZIndex: =3

                ctn_rds_StatusTitle As groupContainer.horizontalAutoLayoutContainer:
                    AlignInContainer: =AlignInContainer.Start
                    DropShadow: =DropShadow.None
                    LayoutAlignItems: =LayoutAlignItems.Stretch
                    LayoutMinHeight: =35
                    LayoutMinWidth: =0
                    LayoutMode: =LayoutMode.Auto
                    ZIndex: =1

                    img_rds_Status As image:
                        Image: ='Production Order History'
                        LayoutMinHeight: =30
                        Width: =30
                        ZIndex: =1

                    lbl_rds_Status As label:
                        Color: =RGBA(73, 113, 215, 1)
                        FillPortions: =0.3
                        LayoutMinHeight: =35
                        LayoutMinWidth: =40
                        Text: ="Tr·∫°ng th√°i"
                        ZIndex: =2

                btn_rds_Status As button:
                    BorderStyle: =BorderStyle.None
                    DisabledColor: =RGBA(0, 0, 0, 1)
                    DisabledFill: =RGBA(201, 232, 155, 1)
                    DisplayMode: =DisplayMode.Disabled
                    Fill: =RGBA(152, 208, 70, 1)
                    FillPortions: =1
                    Height: =20
                    LayoutMinHeight: =20
                    RadiusBottomLeft: =20
                    RadiusBottomRight: =20
                    RadiusTopLeft: =20
                    RadiusTopRight: =20
                    Size: =13
                    Text: =If(locInfoRequest.status = 1,"ƒêang ch·ªù duy·ªát",locInfoRequest.status = 2,"‚úì ƒê√£ duy·ªát","‚òì T·ª´ ch·ªëi")
                    Width: =150
                    ZIndex: =3

    ctn_Navigate_4 As groupContainer.verticalAutoLayoutContainer:
        BorderStyle: =BorderStyle.None
        DropShadow: =DropShadow.None
        Fill: =RGBA(255, 255, 255, 1)
        Height: =768
        LayoutAlignItems: =LayoutAlignItems.Stretch
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        PaddingBottom: =70
        RadiusBottomLeft: =20
        RadiusBottomRight: =0
        RadiusTopLeft: =20
        RadiusTopRight: =0
        Width: =196
        ZIndex: =26

        ctn_HeaderMenu_5 As groupContainer.horizontalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            FillPortions: =0
            Height: =100
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutMinHeight: =100
            LayoutMinWidth: =1
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =20
            PaddingRight: =20
            ZIndex: =1

            img_Logo_4 As image:
                Height: =110
                Image: =Name
                Width: =50
                X: =11
                Y: =13
                ZIndex: =1

            lbl_HeaderTitleMenu_5 As label:
                Color: =RGBA(73, 113, 215, 1)
                FontWeight: =FontWeight.Bold
                Size: =15
                Text: ="Quy tr√¨nh"
                Width: =145
                ZIndex: =2

        ctn_NavigationMenu_4 As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =100
            LayoutMinWidth: =0
            LayoutMode: =LayoutMode.Auto
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            ZIndex: =3

            gal_NavigationMenu_4 As gallery.galleryVertical:
                DelayItemLoading: =true
                Fill: =RGBA(255, 255, 255, 1)
                Height: =652
                Items: |-
                    =If(gblRecUser.roleID = 1,Table({ID:1,Image:Home,Title:"Trang ch·ªß",Navigate:'Home User Screen'}),gblRecUser.roleID = 2 Or gblRecUser.roleID = 4,Table({ID:1,Image:Home,Title:"Trang ch·ªß",Navigate:'Home User Screen'},{ID:2,Image:'Admin Settings Male',Title:"Ph√™ duy·ªát",Navigate:'Approve Screen'}),gblRecUser.roleID = 3,Table({ID:1,Image:Home,Title:"Trang ch·ªß",Navigate:'Home Manager Screen'},{ID:2,Image:'Admin Settings Male',Title:"Ph√™ duy·ªát",Navigate:'Approve Screen'},{ID:3,Image:'Data Recovery',Title:"Thi·∫øt l·∫≠p",Navigate:'User Screen'}),gblRecUser.roleID = 5,Table({ID:1,Image:'Data Recovery',Title:"Thi·∫øt l·∫≠p",Navigate:'User Screen'}))
                Layout: =Layout.Vertical
                LayoutMinHeight: =287
                LayoutMinWidth: =0
                LoadingSpinner: =LoadingSpinner.Data
                OnSelect: =Navigate(ThisItem.Navigate)
                ShowScrollbar: =false
                TemplateSize: =50
                Width: =155
                X: =251
                Y: =115
                ZIndex: =1

                img_MenuImage_4 As image:
                    Height: =30
                    Image: =ThisItem.Image
                    OnSelect: =Select(Parent)
                    Width: =40
                    X: =15
                    Y: =10
                    ZIndex: =1

                lbl_MenuTitle_4 As label:
                    Color: =RGBA(149, 149, 149, 1)
                    FontWeight: =FontWeight.Semibold
                    Height: =29
                    OnSelect: =Select(Parent)
                    Text: =ThisItem.Title
                    Width: =117
                    X: =60
                    Y: =10
                    ZIndex: =2

                btn_Select_5 As button:
                    BorderThickness: =0
                    Fill: =If(ThisItem.ID = gblMenuFunctionSelected,RGBA(149, 149, 149,0.2),RGBA(0, 0, 0, 0))
                    Height: =50
                    HoverFill: =ColorFade(RGBA(149, 149, 149,0.4), -20%)
                    OnSelect: |-
                        =Select(Parent);
                        Set(gblMenuFunctionSelected,ThisItem.ID)
                    PressedFill: =RGBA(149, 149, 149,0.5)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Text: =""
                    Width: =195
                    X: =-5
                    ZIndex: =3

        btn_Exit_4 As button:
            AlignInContainer: =AlignInContainer.Center
            BorderColor: =RGBA(73, 113, 215, 1)
            Color: =RGBA(116, 116, 116, 1)
            Fill: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(73, 113, 215, 1), -20%)
            OnSelect: =Exit()
            PressedColor: =Color.White
            PressedFill: =RGBA(73, 113, 215, 1)
            Text: ="Tho√°t"
            X: =18
            Y: =682
            ZIndex: =4

    ctn_rds_ReviewFile As groupContainer.manualLayoutContainer:
        Fill: =RGBA(0, 0, 0, 0.5)
        Height: =768
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Visible: =locReviewFile
        Width: =1366
        ZIndex: =29

        btn_us_BackGround_12 As button:
            BorderStyle: =BorderStyle.None
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.Disabled
            Height: =669
            RadiusBottomLeft: =5
            RadiusBottomRight: =5
            RadiusTopLeft: =5
            RadiusTopRight: =5
            Text: =""
            Width: =788
            X: =300
            Y: =45
            ZIndex: =1

        lbl_us_Title_15 As label:
            FontWeight: =FontWeight.Bold
            Text: ="Xem file"
            X: =320
            Y: =55
            ZIndex: =2

        shp_us_Deco_24 As rectangle:
            Fill: =RGBA(202, 202, 202, 1)
            Height: =1
            Width: =787
            X: =300
            Y: =101
            ZIndex: =3

        ico_us_Cancel_12 As icon.Cancel:
            Color: =RGBA(149, 149, 149, 1)
            Height: =29
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({locReviewFile:false})
            Width: =25
            X: =1045
            Y: =60
            ZIndex: =4

        shp_us_Deco_25 As rectangle:
            Fill: =RGBA(202, 202, 202, 1)
            Height: =1
            Width: =787
            X: =300
            Y: =643
            ZIndex: =6

        btn_us_Cancel_12 As button:
            BorderThickness: =1
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Height: =36
            HoverFill: =ColorFade(Self.Fill, -20%)
            OnSelect: |-
                =UpdateContext({locReviewFile:false})
            PressedColor: =RGBA(0,0,0,1)
            PressedFill: =Self.Fill
            RadiusBottomLeft: =5
            RadiusBottomRight: =5
            RadiusTopLeft: =5
            RadiusTopRight: =5
            Text: ="OK"
            Width: =87
            X: =983
            Y: =663
            ZIndex: =8

    PdfViewer1 As pdfViewer:
        BorderColor: =RGBA(0, 0, 0, 1)
        Document: =First(locFileReadPDF).Value
        Fill: =RGBA(0, 0, 0, 0.5)
        Height: =537
        Visible: =locReviewFile
        Width: =782
        X: =303
        Y: =104
        ZIndex: =30
        Zoom: =95

    ctn_as_Reject_1 As groupContainer.manualLayoutContainer:
        Fill: =RGBA(0, 0, 0, 0.5)
        Height: =768
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Visible: =locReject
        Width: =1366
        ZIndex: =31

        btn_as_BackGround_8 As button:
            BorderStyle: =BorderStyle.None
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =DisplayMode.Disabled
            Height: =269
            RadiusBottomLeft: =5
            RadiusBottomRight: =5
            RadiusTopLeft: =5
            RadiusTopRight: =5
            Text: =""
            Width: =608
            X: =375
            Y: =261
            ZIndex: =1

        lbl_as_Title_10 As label:
            FontWeight: =FontWeight.Bold
            Text: ="T·ª´ ch·ªëi y√™u c·∫ßu"
            X: =387
            Y: =267
            ZIndex: =2

        shp_as_Deco_16 As rectangle:
            Fill: =RGBA(202, 202, 202, 1)
            Height: =1
            Width: =608
            X: =375
            Y: =311
            ZIndex: =3

        ico_as_Cancel_8 As icon.Cancel:
            Color: =RGBA(149, 149, 149, 1)
            Height: =29
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({locReject:false})
            Width: =25
            X: =942
            Y: =271
            ZIndex: =4

        shp_as_Deco_17 As rectangle:
            Fill: =RGBA(202, 202, 202, 1)
            Height: =1
            Width: =608
            X: =375
            Y: =473
            ZIndex: =6

        btn_as_Submit_1 As button:
            BorderThickness: =1
            Fill: =RGBA(0, 89, 204, 1)
            Height: =36
            HoverFill: =ColorFade(Self.Fill, -20%)
            OnSelect: |-
                =//C·∫≠p nh·∫≠t l·ªãch s·ª≠ t·ª´ ch·ªëi
                Patch('ASDocument.HistoryApprove',Defaults('ASDocument.HistoryApprove'),{documentID:locInfoRequest.documentID,userID:gblRecUser.userID,status:2,approveTime:Value(Day(Today()) & Month(Today()) & Year(Today())),comment:If(IsBlank(txt_as_RejectReason_1.Text),"Kh√¥ng c√≥",txt_as_RejectReason_1.Text),approveProcess:locInfoRequest.currentApproveLevel,requestTimeNum:locInfoRequest.requestTimeNum + 1});
                
                //C·∫≠p nh·∫≠t tr·∫°ng th√°i y√™u c·∫ßu th√†nh t·ª´ ch·ªëi v√† s·ªë l·∫ßn b·ªã t·ª´ ch·ªëi c·ªßa y√™u c·∫ßu
                Patch('ASDocument.DocumentRequest',LookUp('ASDocument.DocumentRequest',ID = locInfoRequest.ID),{requestTimeNum:locInfoRequest.requestTimeNum + 1,status:3});
                
                //G·ª≠i mail
                'ASDocument.SendMail'.Run(LookUp(gblColAllUser,userID = locInfoRequest.userID).email,"Y√™u c·∫ßu k√Ω duy·ªát vƒÉn b·∫£n " & locInfoRequest.documentID & " ƒë√£ b·ªã t·ª´ ch·ªëi","T√™n y√™u c·∫ßu: " & locInfoRequest.documentName & "<br>" & "Th·ªùi gian t·∫°o y√™u c·∫ßu: " & locInfoRequest.Created & "<br>" & "L√≠ do: " & If(IsBlank(txt_as_RejectReason_1.Text),"Kh√¥ng c√≥",txt_as_RejectReason_1.Text));
                
                Notify("T·ª´ ch·ªëi th√†nh c√¥ng",NotificationType.Success,1500);
                UpdateContext({locReject:false})
            PressedColor: =RGBA(255,255,255,1)
            PressedFill: =Self.Fill
            RadiusBottomLeft: =5
            RadiusBottomRight: =5
            RadiusTopLeft: =5
            RadiusTopRight: =5
            Text: ="X√°c nh·∫≠n"
            Width: =118
            X: =847
            Y: =485
            ZIndex: =7

        btn_as_Cancel_1 As button:
            BorderThickness: =1
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Height: =36
            HoverFill: =ColorFade(Self.Fill, -20%)
            OnSelect: |-
                =UpdateContext({locReject:false})
            PressedColor: =RGBA(0,0,0,1)
            PressedFill: =Self.Fill
            RadiusBottomLeft: =5
            RadiusBottomRight: =5
            RadiusTopLeft: =5
            RadiusTopRight: =5
            Text: ="H·ªßy"
            Width: =87
            X: =746
            Y: =485
            ZIndex: =8

        lbl_as_RejectReason_1 As label:
            Height: =28
            Text: ="L√≠ do"
            Width: =62
            X: =390
            Y: =327
            ZIndex: =9

        txt_as_RejectReason_1 As text:
            BorderColor: =RGBA(116, 116, 116, 1)
            BorderThickness: =1
            Default: =""
            Height: =125
            HintText: ="Nh·∫≠p l√≠ do"
            Mode: =TextMode.MultiLine
            Width: =498
            X: =452
            Y: =327
            ZIndex: =10

